name: 'Kubeaudit'
description: 'Github Action to run kubeaudit'
author: 'Klustair'
branding:
  icon: 'eye'
  color: 'green'
inputs:
  path:
    description: 'path to chart'
    required: true
  kubeauditCommands:
    description: 'commands to run'
    required: true
    default: 'all'
  helmVersion:
    description: 'helm major version [2,3]'
    required: false
    default: '3'
  kubeauditFormat:
    description: 'kubeaudit: The output format to use (one of "pretty", "logrus", "json") (default "pretty")'
    required: false
    default: 'pretty'
  kubeauditMinseverity:
    description: 'kubeaudit: Set the lowest severity level to report (one of "error", "warning", "info") (default "info")'
    required: false
    default: 'info'
  kubeauditIncludegenerated:
    description: 'kubeaudit Include generated resources in scan  (eg. pods generated by deployments).'
    required: false
    default: 'false'
  kubeauditVersion:
    description: 'kubeaudit version'
    required: false
  helmV2Version:
    description: 'install Helm V2 version'
    required: false
  helmV3Version:
    description: 'install Helm V3 version'
    required: false
  kubeauditConfig:
    description: 'kubeaudit config'
    required: false
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.path }}                        #1
    - ${{ inputs.kubeauditCommands }}           #2
    - ${{ inputs.helmVersion }}                 #3
    - ${{ inputs.kubeauditFormat }}             #4
    - ${{ inputs.kubeauditMinseverity }}        #5
    - ${{ inputs.kubeauditIncludegenerated }}   #6
    - ${{ inputs.kubeauditVersion }}            #7
    - ${{ inputs.helmV2Version }}               #8
    - ${{ inputs.helmV3Version }}               #9
    - ${{ inputs.kubeauditConfig }}             #10